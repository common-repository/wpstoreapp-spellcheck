!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,n=window.wp.editPost,l=window.wp.plugins,r=window.wp.components,a=window.wp.apiFetch,c=e.n(a),o=window.wp.data,i=window.wp.blocks,s=window.wp.compose;(0,l.registerPlugin)("chinese-spell-check",{icon:(0,t.createElement)(r.Icon,{icon:(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,t.createElement)("rect",{x:"0",fill:"none",width:"20",height:"20"}),(0,t.createElement)("g",null,(0,t.createElement)("path",{d:"M15.84 2.76c.25 0 .49.04.71.11.23.07.44.16.64.25l.35-.81c-.52-.26-1.08-.39-1.69-.39-.58 0-1.09.13-1.52.37-.43.25-.76.61-.99 1.08C13.11 3.83 13 4.38 13 5c0 .99.23 1.75.7 2.28s1.15.79 2.02.79c.6 0 1.13-.09 1.6-.26v-.84c-.26.08-.51.14-.74.19-.24.05-.49.08-.74.08-.59 0-1.04-.19-1.34-.57-.32-.37-.47-.93-.47-1.66 0-.7.16-1.25.48-1.65.33-.4.77-.6 1.33-.6zM6.5 8h1.04L5.3 2H4.24L2 8h1.03l.58-1.66H5.9zM8 2v6h2.17c.67 0 1.19-.15 1.57-.46.38-.3.56-.72.56-1.26 0-.4-.1-.72-.3-.95-.19-.24-.5-.39-.93-.47v-.04c.35-.06.6-.21.78-.44.18-.24.28-.53.28-.88 0-.52-.19-.9-.56-1.14-.36-.24-.96-.36-1.79-.36H8zm.98 2.48V2.82h.85c.44 0 .77.06.97.19.21.12.31.33.31.61 0 .31-.1.53-.29.66-.18.13-.48.2-.89.2h-.95zM5.64 5.5H3.9l.54-1.56c.14-.4.25-.76.32-1.1l.15.52c.07.23.13.4.17.51zm3.34-.23h.99c.44 0 .76.08.98.23.21.15.32.38.32.69 0 .34-.11.59-.32.75s-.52.24-.93.24H8.98V5.27zM4 13l5 5 9-8-1-1-8 6-4-3z"}))),size:20}),render:()=>{const[e,l]=(0,t.useState)([]),[a,m]=(0,t.useState)(0),d=(0,s.useDebounce)((0,t.useCallback)((()=>{const e=(0,o.select)("core/editor"),t=(0,i.parse)(e.getEditedPostContent());if(0===t.length)return;const n=t.map((e=>"core/paragraph"===e.name||"core/heading"===e.name?e.attributes.content.length:0)).reduce(((e,t)=>e+t));m(n)})),500);return(0,o.subscribe)(d),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.PluginSidebarMoreMenuItem,{target:"sidebar-name"},"中文语法检查"),(0,t.createElement)(n.PluginSidebar,{name:"chinese-spell-check",title:"中文语法检查"},(0,t.createElement)(r.Panel,null,(0,t.createElement)(r.PanelBody,{title:"文章基本信息",opened:!0},(0,t.createElement)(r.PanelRow,null,(0,t.createElement)(r.Tip,null,(0,t.createElement)("p",null,"当前仅支持全文检查"))),(0,t.createElement)(r.PanelRow,null,"本文全文共",a,"字"),(0,t.createElement)(r.PanelRow,null,(0,t.createElement)(r.Button,{variant:"primary",style:{},onClick:async()=>{l([]);const e=(0,o.select)("core/editor"),t=(0,i.parse)(e.getEditedPostContent()).map((e=>"core/paragraph"===e.name||"core/heading"===e.name?e.attributes.content:0)).reduce(((e,t)=>e+t));try{const e=await c()({path:"chinese-spell-check/v1/check",method:"POST",data:{content:t}});0==e.code?e.data.length&&l(e.data):alert(e.msg)}catch(e){alert(e.message)}}},"检查全文"))),(0,t.createElement)(r.PanelBody,{title:"拼写检查结果",opened:!0},(()=>{const n={char:"别字",word:"错词",redund:"冗余",order:"乱序",miss:"缺失",dapei:"搭配",punc:"标点",idm:"成语",org_R:"机构名字词冗余",leader:"领导人"};return 0===e.length?(0,t.createElement)(r.PanelRow,null,"暂无结果，请点击上方检查全文获取检查结果"):e.map((e=>(0,t.createElement)(r.PanelRow,null,(0,t.createElement)("div",null,(0,t.createElement)(r.Icon,{icon:(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{verticalAlign:"middle"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},(0,t.createElement)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),size:24}),(0,t.createElement)("strong",null,n[e[3]])),(0,t.createElement)("div",null,(0,t.createElement)("mark",null,e[1]),"应改为",(0,t.createElement)("mark",null,e[2]?e[2]:"__")))))})))))}})}();